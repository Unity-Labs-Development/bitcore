<head-nav [chainNetwork]="chainNetwork"></head-nav>
<ion-content>
  <ion-grid fixed>

    <div class="page-content">

      <loader *ngIf="loading" [type]="'title'"></loader>

      <error [message]="errorMessage" *ngIf="!loading && errorMessage"></error>

      <div *ngIf="!loading && !errorMessage">

        <h1>区块 #{{ block.height }}</h1>
        <p class="item-hash">
          <b>区块哈希</b> {{ block.hash }} <button [copyToClipboard]="block.hash">
            <ion-icon md="md-copy"></ion-icon>
          </button>
        </p>

        <h2>详情</h2>

        <ion-list *ngIf="!loading" class="list--summary">
          <ion-grid>
            <ion-row>
              <ion-col col-12 col-md class="allow-truncated-text">
                <ion-item>
                  交易笔数
                  <ion-note item-end>
                    {{ block.tx.length }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  高度
                  <ion-note item-end>
                    {{ block.height }}
                    <span [hidden]="!block.isMainChain">(Mainchain)</span>
                  </ion-note>
                </ion-item>
                <ion-item>
                  区块奖励
                  <ion-note item-end>
                    {{ currencyProvider.getConvertedNumber(block.reward) | number }}
                    {{ currencyProvider.currencySymbol }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  时间戳
                  <ion-note item-end>
                    {{ block.time * 1000 | date:'medium' }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  矿工
                  <ion-note item-end *ngIf="block.poolInfo">
                    <a href="{{ block.poolInfo.url }}">{{ block.poolInfo.poolName }}</a>
                  </ion-note>
                </ion-item>
                <ion-item>
                  梅克尔根
                  <ion-note item-end>
                    {{ block.merkleroot }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  上一个块
                  <ion-note item-end>
                    <a (click)="goToPreviousBlock()"
                      [ngClass]="{'disabled-link': block.height - 1 === 0 }">{{ block.height - 1 }}</a>
                  </ion-note>
                </ion-item>
              </ion-col>
              <ion-col col-12 col-md class="allow-truncated-text">
                <ion-item>
                  难度
                  <ion-note item-end>
                    {{ block.difficulty }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  位
                  <ion-note item-end>
                    {{ block.bits }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  大小 (字节)
                  <ion-note item-end>
                    {{ block.size }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  版本
                  <ion-note item-end>
                    {{ block.version }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  随机数
                  <ion-note item-end>
                    {{ block.nonce }}
                  </ion-note>
                </ion-item>
                <ion-item>
                  下一个块
                  <ion-note item-end>
                    <a (click)="goToNextBlock()"
                      [ngClass]="{'disabled-link': !block.nextblockhash }">{{ block.height + 1 }}</a>
                  </ion-note>
                </ion-item>
                <ion-item>
                  确认数
                  <ion-note item-end>
                    {{ confirmations }}
                  </ion-note>
                </ion-item>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-list>

        <h2>交易</h2>
        <transaction-list [queryType]="'blockHash'" [queryValue]="block.hash" [chainNetwork]="chainNetwork">
        </transaction-list>
      </div>

    </div>
  </ion-grid>
</ion-content>
<footer [chainNetwork]="chainNetwork"></footer>